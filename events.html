<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Events - Zuhd Maktab</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Amiri&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      :root {
        --deep-green: #0f3d2e;
        --sand-beige: #f7efe5;
        --gold: #c8b88a;
        --white: #ffffff;
        --off-white: #f9f9f9;
        --dark-text: #333333;
        --light-text: #666666;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: "Inter", sans-serif;
        background-color: var(--sand-beige);
        color: var(--dark-text);
        line-height: 1.6;
      }

      .arabic {
        font-family: "Amiri", serif;
      }

      /* Header Styles */
      .hero-section {
        height: 90vh;
        background-image: url("https://i.ibb.co/p6J1SHN1/02-Events-1920x500.png");
        background-size: cover;
        background-position: center;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        color: var(--white);
        padding: 0 20px;
        position: relative;
      }

      .hero-content {
        max-width: 800px;
        z-index: 2;
      }

      .hero-title {
        font-size: 2.8rem;
        max-width: 600px;
        font-weight: 700;
        line-height: 60px;
        margin-bottom: 10px;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
      }

      .hero-subtitle {
        font-size: 1.4rem;
        margin: 40px 0px;
        font-weight: 300;
      }

      .cta-button {
        display: inline-block;
        background-color: var(--gold);
        color: var(--deep-green);
        padding: 15px 35px;
        border-radius: 10px;
        font-weight: 600;
        text-decoration: none;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        cursor: pointer;
      }

      .cta-button:hover {
        background-color: var(--deep-green);
        color: var(--gold);
        transform: translateY(-3px);
      }

      /* Community Integration */
      .community-section {
        max-width: 1200px;
        margin: 80px auto;
        padding: 0 20px;
        text-align: center;
      }

      .instagram-feed {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin: 40px 0;
        flex-wrap: wrap;
      }

      .instagram-post {
        width: 200px;
        height: 200px;
        background-color: #ddd;
        border-radius: 10px;
        overflow: hidden;
        transition: transform 0.3s ease;
      }

      .instagram-post:hover {
        transform: scale(1.05);
      }

      .instagram-post img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }

      .whatsapp-cta {
        background-color: var(--deep-green);
        color: var(--white);
        padding: 30px;
        border-radius: 15px;
        margin-top: 50px;
        position: relative;
      }

      /* Footer */
      .footer {
        background-color: var(--deep-green);
        color: var(--white);
        padding: 50px 0 20px;
      }

      .footer-content {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }

      .footer-top {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 40px;
        margin-bottom: 40px;
      }

      .footer-column h3 {
        font-size: 1.3rem;
        margin-bottom: 20px;
        color: var(--gold);
      }

      .footer-column ul {
        list-style: none;
        padding: 0;
      }

      .footer-column ul li {
        margin-bottom: 12px;
      }

      .footer-column a {
        color: #e0e0e0;
        text-decoration: none;
        transition: color 0.3s ease;
      }

      .footer-column a:hover {
        color: var(--gold);
      }

      .newsletter-form {
        display: flex;
        margin-top: 15px;
      }

      .newsletter-form input {
        flex: 1;
        padding: 12px 15px;
        border: none;
        border-radius: 5px 0 0 5px;
        font-family: inherit;
      }

      .newsletter-form button {
        padding: 0 20px;
        background-color: var(--gold);
        color: var(--deep-green);
        border: none;
        border-radius: 0 5px 5px 0;
        cursor: pointer;
        font-weight: 600;
      }

      .social-links {
        display: flex;
        gap: 15px;
        margin-top: 20px;
        justify-content: center;
      }

      .social-link {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        background-color: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        color: white;
        transition: background-color 0.3s ease;
      }

      .social-link:hover {
        background-color: var(--gold);
        color: var(--deep-green);
      }

      .footer-bottom {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-top: 20px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        flex-wrap: wrap;
        gap: 20px;
      }

      .footer-links {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
        justify-content: center;
      }

      .section-title {
        font-size: 2rem;
        font-weight: bold;
        margin-bottom: 60px;
        margin-top: 40px;
        color: #1c1c1c;
        text-align: center;
        position: relative;
      }

      .section-title:after {
        content: "";
        position: absolute;
        bottom: -15px;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 3px;
        background-color: var(--gold);
      }

      /* Grid - exactly 3 equal columns */
      .events-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 30px;
        max-width: 1100px;
        margin: 0px auto 100px;
      }

      .event-card {
        position: relative;
        border-radius: 16px;
        overflow: hidden;
        height: 420px; /* fixed height for equal cards */
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.25);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      .event-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
      }

      .card-image {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: 0;
        transition: transform 0.5s ease;
      }

      .event-card:hover .card-image {
        transform: scale(1.05);
      }

      .card-content {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 100%; /* cover entire card for full gradient */
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        padding: 24px;
        background: linear-gradient(
          to top,
          rgb(2, 26, 14) 20%,
          /* deep green at bottom */ rgba(0, 22, 11, 0.747) 50%,
          /* mid-fade */ rgba(0, 40, 20, 0) 80% /* transparent top */
        );
        color: #fff;
        z-index: 1;
        border-radius: 16px;
      }

      .card-title {
        font-size: 1.3rem;
        margin-bottom: 12px;
        font-weight: 600;
      }

      .card-meta {
        font-size: 0.95rem;
        margin-bottom: 20px;
      }

      .card-meta-item {
        display: flex;
        align-items: center;
        margin: 6px 0;
        color: white;
      }

      .card-meta-item i {
        margin-right: 8px;
        color: #c8b88a;
      }

      .card-cta {
        display: inline-block;
        padding: 10px 18px;
        border: 2px solid #c8b88a;
        border-radius: 8px;
        text-decoration: none;
        color: #fff;
        font-weight: 500;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .card-cta:hover {
        background: var(--deep-green);
      }

      /* past events */
      #past-events {
        background: var(--deep-green);
        padding: 50px 20px 20px;
        color: var(--white);
      }

      #past-events .event-card {
        border: 2px solid var(--gold);
      }

      #past-events h2 {
        color: var(--gold);
      }

      .event-badge {
        position: absolute;
        top: 10px;
        left: 10px;
        background: #e63946;
        color: white;
        padding: 4px 8px;
        font-size: 12px;
        font-weight: bold;
        border-radius: 4px;
      }
      .event-card {
        position: relative;
      }
      .extra-events.hidden {
        display: none;
      }
      .show-more-wrapper {
        display: flex;
        justify-content: center;
        margin-bottom: 40px;
      }

      /* Modal Styles */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        z-index: 1000;
        overflow-y: auto;
        padding: 20px;
      }

      .modal-content {
        background-color: var(--sand-beige);
        margin: 40px auto;
        padding: 30px;
        border-radius: 15px;
        max-width: 900px;
        position: relative;
        box-shadow: 0 5px 25px rgba(0, 0, 0, 0.3);
      }

      .close-modal {
        position: absolute;
        top: 15px;
        right: 20px;
        font-size: 28px;
        font-weight: bold;
        color: var(--deep-green);
        cursor: pointer;
        transition: color 0.3s;
      }

      .close-modal:hover {
        color: #000;
      }

      .modal-title {
        color: var(--deep-green);
        text-align: center;
        margin-bottom: 25px;
        font-size: 2rem;
        border-bottom: 2px solid var(--gold);
        padding-bottom: 15px;
      }

      .modal-intro {
        text-align: center;
        margin-bottom: 30px;
        font-size: 1.1rem;
        line-height: 1.8;
      }

      .event-gallery {
        display: flex;
        flex-direction: column;
        gap: 30px;
      }

      .event-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 15px;
      }

      .event-image {
        width: 100%;
        max-width: 600px;
        height: 300px;
        object-fit: cover;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .event-caption {
        text-align: center;
        font-weight: 600;
        color: var(--deep-green);
        font-size: 1.1rem;
      }

      .event-location {
        color: var(--light-text);
        margin-top: 5px;
        font-size: 0.95rem;
      }

      /* Responsive */
      @media (max-width: 900px) {
        .events-grid {
          grid-template-columns: 1fr 1fr;
        }
      }

      @media (max-width: 600px) {
        .events-grid {
          grid-template-columns: 1fr;
        }

        .featured-card {
          padding: 50px 20px;
        }

        .event-meta {
          flex-direction: column;
          gap: 15px;
        }

        .modal-content {
          padding: 20px 15px;
          margin: 20px auto;
        }

        .modal-title {
          font-size: 1.6rem;
        }
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .hero-title {
          font-size: 2.5rem;
        }

        .hero-subtitle {
          font-size: 1.2rem;
        }

        .featured-card {
          padding: 30px 20px;
        }

        .featured-title {
          font-size: 2rem;
        }

        .footer-top {
          grid-template-columns: 1fr;
        }

        .footer-bottom {
          flex-direction: column;
          text-align: center;
        }

        .footer-links {
          justify-content: center;
        }
      }

      @media (max-width: 480px) {
        .hero-title {
          font-size: 2rem;
        }

        .section-title {
          font-size: 1.8rem;
        }

        .newsletter-form {
          flex-direction: column;
        }

        .newsletter-form input {
          border-radius: 5px;
          margin-bottom: 10px;
        }

        .newsletter-form button {
          border-radius: 5px;
          width: 100%;
        }

        .footer-links {
          flex-direction: column;
          align-items: center;
          gap: 10px;
        }

        .instagram-post {
          width: 150px;
          height: 150px;
        }
      }

      /* Grid for event images */
      .event-grid {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 15px;
        max-width: 900px;
        margin: 20px auto;
      }

      .event-grid img {
        max-width: 280px; /* ✅ controls image width */
        width: 100%; /* scale nicely */
        height: auto; /* keep natural aspect ratio */
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      }

      .event-caption {
        margin: 20px 0 40px;
        text-align: center;
        font-weight: 600;
        color: var(--deep-green);
        font-size: 1.2rem;
      }

      .event-slider-wrapper {
        position: relative;
        max-width: 600px;
        margin: 20px auto;
        text-align: center;
      }

      .event-slider {
        position: relative;
        overflow: hidden;
      }

      .slide {
        display: none;
      }
      .slide.active {
        display: block;
      }

      .slide img {
        width: 100%;
        max-height: 460px; /* ✅ limit max height */
        object-fit: contain; /* ✅ keep aspect ratio */
        border-radius: 10px;
      }

      .slider-btn {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(0, 0, 0, 0.5);
        color: white;
        border: none;
        font-size: 24px;
        padding: 8px 12px;
        cursor: pointer;
        border-radius: 50%;
      }
      .prev-btn {
        left: 10px;
      }
      .next-btn {
        right: 10px;
      }

      .event-caption {
        margin-top: 10px;
        font-weight: bold;
      }
    </style>
  </head>
  <body class="events-page">
    <!-- Navbar placeholder -->
    <nav>
      <div id="navbar"></div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
      <div class="hero-content">
        <h1 class="hero-title">Upcoming Events & Community Gatherings</h1>
        <p class="hero-subtitle">
          Join us in strengthening faith, unity, and knowledge.
        </p>
        <a href="#upcoming-events" class="cta-button">See Upcoming Events</a>
      </div>
    </section>

    <br /><br />
    <!-- Upcoming Events -->
    <section class="events-section" id="upcoming-events">
      <h2 class="section-title">Upcoming Events</h2>
      <div class="events-grid" id="upcoming-events-container">
        <!-- Events will be dynamically inserted here -->
      </div>
      <div class="show-more-wrapper">
        <button id="show-more-upcoming" class="cta-button">Show More</button>
      </div>
    </section>

    <!-- Past Events -->
    <section id="past-events">
      <div class="past-events-container">
        <h2 class="section-title">Past Events</h2>

        <div class="events-grid" id="past-events-container">
          <!-- Past events will be dynamically inserted here -->
        </div>
        <div class="show-more-wrapper">
          <button id="show-more-past" class="cta-button">Show More</button>
        </div>
      </div>
    </section>

    <!-- Community Integration -->
    <section class="community-section">
      <h2 class="section-title">Join Our Community</h2>

      <div class="elfsight-app-a7f6f23b-52e3-4550-b35d-8844a780d55a" data-elfsight-app-lazy></div>


      <div class="whatsapp-cta">
        <h3>Stay updated on upcoming events</h3>
        <p>Join our WhatsApp community group for instant updates</p>
        <br />
        <button class="cta-button">Join WhatsApp Group</button>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-content">
        <div class="footer-top">
          <div class="footer-column">
            <h3>zuhd Academy</h3>
            <ul>
              <li><a href="/about-zuhd.html">About ZUHD</a></li>
              <li><a href="/zuhd-lectures.html">ZUHD Lectures</a></li>
              <li>
                <a href="/after-school-classes.html">After School Classes</a>
              </li>
              <li><a href="/terms.html">Terms and conditions</a></li>
            </ul>
          </div>
          <div class="footer-column">
            <h3>Quick Links</h3>
            <ul>
              <li><a href="/store.html">zuhd Store</a></li>
              <li><a href="/donate.html">Donate Now</a></li>
              <li><a href="/ziyarat.html">Ziyarat</a></li>
            </ul>
          </div>
          <div class="footer-column">
            <h3>Contact Us</h3>
            <ul>
              <li><a href="/our-story.html">Our Story</a></li>
              <li><a href="/blog.html">Blog</a></li>
              <li><a href="/about.html">About Us</a></li>
              <li><a href="/contact.html">Contact Us</a></li>
            </ul>
          </div>
          <div class="footer-column newsletter">
            <h3>Stay Connected to Guidance</h3>
            <p>
              Be the first to receive Islamic guidance, inspiring articles, and
              special offers—only from ZUHD.
            </p>
            <form class="newsletter-form">
              <input type="email" placeholder="Enter your email" required />
              <button type="submit">→</button>
            </form>
            <div class="social-links">
              <a
                href="https://www.facebook.com/zuhd.au"
                class="social-link"
                title="Facebook"
              >
                <i class="fab fa-facebook-f"></i>
              </a>
              <a
                href="https://www.instagram.com/zuhd_au"
                class="social-link"
                title="Instagram"
              >
                <i class="fab fa-instagram"></i>
              </a>
              <a
                href="https://www.tiktok.com/@zuhd.store"
                class="social-link"
                title="TikTok"
              >
                <i class="fab fa-tiktok"></i>
              </a>
              <a
                href="https://www.youtube.com/@zuhdau"
                class="social-link"
                title="YouTube"
              >
                <i class="fab fa-youtube"></i>
              </a>
            </div>
          </div>
        </div>
        <div class="footer-bottom">
          <div class="copyright">© 2024 Zuhd Guidance All rights reserved.</div>
          <div class="footer-links">
            <a href="#">Terms of Service</a>
            <a href="#">Privacy Policy</a>
            <a href="#">Refund Policy</a>
            <a href="#">Accessibility Policy</a>
          </div>
        </div>
      </div>
    </footer>

    <!-- Modal for Before the Trumpet Event -->
    <div id="trumpet-modal" class="modal">
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2 class="modal-title">Before the Trumpet: A World on the Edge</h2>
        <p class="modal-intro" id="modal-intro-text">
          <!-- Intro text will be inserted by JavaScript -->
        </p>

        <div class="event-gallery" id="event-gallery">
          <!-- Event blocks will be inserted by JavaScript -->
        </div>
      </div>
    </div>

    <!-- Palestine Modal -->
    <div id="palestine-modal" class="modal">
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2>Palestine National Day 2025</h2>
        <p class="modal-intro-text"></p>
        <div id="palestine-gallery" class="modal-gallery"></div>
      </div>
    </div>

    <!-- Victoria Festival Modal -->
    <div id="victoria-festival-modal" class="modal">
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2>Victoria Spring Festival</h2>
        <p class="modal-intro-text"></p>
        <div id="victoria-festival-gallery" class="modal-gallery"></div>
      </div>
    </div>

    <!-- Seerah Conference Modal -->
    <div id="seerah-modal" class="modal">
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2>5th Annual Seerah Conference</h2>
        <p class="modal-intro-text"></p>
        <div id="seerah-gallery" class="modal-gallery"></div>
      </div>
    </div>

    <script>
      // Other upcoming events with modal data
      const otherUpcomingEvents = [
        {
          id: "palestine",
          title: "Palestine National Day 2025",
          date: "8 Nov 2025 (Friday)",
          location: "Federation Square, Melbourne",
          image: "events/palestine/0.jpg", // ✅ cover card image
          intro:
            "Commemorating Palestine National Day with cultural programs, solidarity events, and speeches.",
          images: [
            "events/palestine/0.jpg",
            "events/palestine/1.jpg",
            "events/palestine/2.jpg",
          ],
        },
        {
          id: "victoria-festival",
          title: "Victoria Spring Festival",
          date: "28–30 Nov 2025 (Fri–Sun)",
          location: "Melton Police Paddock",
          image: "events/victoria spring festival/Victoria Spring Festival.png",
          intro:
            "Celebrate the Victoria Spring Festival with food stalls, family activities, and performances.",
          images: [
            "events/victoria spring festival/Victoria Spring Festival.png",
          ],
        },
        {
          id: "seerah",
          title: "5th Annual Seerah Conference",
          date: "21 Sep 2025 (Sunday)",
          location: "Keysborough Mosque",
          image:
            "events/annual seerah conference/5th annual serrah conference.png",
          intro:
            "An enlightening gathering of scholars and community to reflect on the Seerah of the Prophet ﷺ.",
          images: [
            "events/annual seerah conference/5th annual serrah conference.png",
          ],
        },
      ];

      const pastEvents = [
        {
          title: "SHAYKH MUFTI TAUQEER Visit",
          image:
            "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
          link: "https://www.instagram.com/p/DM5X3SCSiFo/?img_index=1",
        },
        {
          title: "Al Itqan Eid Carnival 2025",
          image:
            "https://images.unsplash.com/photo-1581578021517-5d8ad8597852?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
          link: "https://www.instagram.com/p/DIiV2xeS0hW/",
        },
        {
          title: "Melton Eid fest",
          image:
            "https://images.unsplash.com/photo-1531538606174-0f90ff5dce83?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
          link: "https://www.instagram.com/p/DId0pywy-Mi/",
        },
        {
          title: "Eid show Melbourne",
          image:
            "https://images.unsplash.com/photo-1511795409834-ef04bbd61622?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
          link: "https://www.instagram.com/p/DIOb3bASGjL/",
        },
        {
          title: "Vmm Summer night market",
          image:
            "https://images.unsplash.com/photo-1580153434318-6a13e5c3f6cf?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
          link: "https://www.instagram.com/p/DDi7sssyAsF/",
        },
        {
          title: "Maktab Point Cook End year jalsa",
          image:
            "https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
          link: "https://www.instagram.com/p/DDd6Cnzyd39/",
        },
      ];

      // Function to create event card HTML
      function createEventCard(event, isPast = false) {
        if (isPast) {
          return `
        <div class="event-card">
          <img src="${event.image}" alt="${event.title}" class="card-image" />
          <div class="card-content">
            <h3 class="card-title">${event.title}</h3>
            <a href="${event.link}" target="_blank" class="card-cta">
              View Photos
            </a>
          </div>
        </div>
      `;
        } else {
          if (event.isSeries) {
            return `
          <div class="event-card">
            <div class="event-badge">Tour Series</div>
            <img src="${event.image}" alt="${event.title}" class="card-image" />
            <div class="card-content">
              <h3 class="card-title">${event.title}</h3>
              <div class="card-meta">
                <div class="card-meta-item">
                  <i class="fas fa-calendar-alt"></i>
                  <span>${event.dateRange}</span>
                </div>
                <div class="card-meta-item">
                  <i class="fas fa-map-marker-alt"></i>
                  <span>${event.locations}</span>
                </div>
              </div>
              <a class="card-cta open-modal-btn" data-modal="trumpet-modal">
                Learn More
              </a>
            </div>
          </div>
        `;
          } else {
            return `
          <div class="event-card">
            <img src="${event.image}" alt="${event.title}" class="card-image" />
            <div class="card-content">
              <h3 class="card-title">${event.title}</h3>
              <div class="card-meta">
                <div class="card-meta-item">
                  <i class="fas fa-calendar-alt"></i>
                  <span>${event.date}</span>
                </div>
                <div class="card-meta-item">
                  <i class="fas fa-map-marker-alt"></i>
                  <span>${event.location}</span>
                </div>
              </div>
              <a class="card-cta open-modal-btn" data-modal="${event.id}-modal">
                Learn More
              </a>
            </div>
          </div>
        `;
          }
        }
      }

      // Render events with show more/less
      function renderEvents(
        events,
        containerId,
        isPast = false,
        initialCount = 3
      ) {
        const container = document.getElementById(containerId);
        const showMoreBtn = document.getElementById(
          `show-more-${isPast ? "past" : "upcoming"}`
        );

        container.innerHTML = "";
        const eventsToShow = events.slice(0, initialCount);
        eventsToShow.forEach((event) => {
          container.innerHTML += createEventCard(event, isPast);
        });

        let showingAll = events.length <= initialCount;

        if (events.length > initialCount) {
          showMoreBtn.style.display = "block";
          showMoreBtn.textContent = "Show More";

          showMoreBtn.onclick = function () {
            if (showingAll) {
              container.innerHTML = "";
              events.slice(0, initialCount).forEach((event) => {
                container.innerHTML += createEventCard(event, isPast);
              });
              showMoreBtn.textContent = "Show More";
            } else {
              container.innerHTML = "";
              events.forEach((event) => {
                container.innerHTML += createEventCard(event, isPast);
              });
              showMoreBtn.textContent = "Show Less";
            }
            showingAll = !showingAll;
          };
        } else {
          showMoreBtn.style.display = "none";
        }
      }

      const trumpetSeries = {
        title: "Before the Trumpet: A World on the Edge",
        dateRange: "20-28 Sep 2025",
        locations: "Multiple Cities Tour",
        image: "events/al atqan academy/A3 Flyer.png", // ✅ main card flyer
        isSeries: true,
        events: [
          {
            date: "20 September, Saturday",
            location: "Australian Islamic College, Perth",
            caption: "Perth Event",
            images: [
              "events/al atqan academy/perth/0.png",
              "events/al atqan academy/perth/1.jpg",
              "events/al atqan academy/perth/2.jpg",
              "events/al atqan academy/perth/3.jpg",
            ],
          },
          {
            date: "21 September, Sunday",
            location: "Islamic College of Brisbane, Brisbane",
            caption: "Brisbane Event",
            images: [
              "events/al atqan academy/brisbine/0.png",
              "events/al atqan academy/brisbine/1.jpg",
              "events/al atqan academy/brisbine/2.jpg",
              "events/al atqan academy/brisbine/3.jpg",
            ],
          },
          {
            date: "27 September, Saturday",
            location: "Bankstown Sports Club, Sydney",
            caption: "Sydney Event",
            images: [
              "events/al atqan academy/sydney/0.png",
              "events/al atqan academy/sydney/1.png",
              "events/al atqan academy/sydney/2.jpg",
              "events/al atqan academy/sydney/3.jpg",
            ],
          },
          {
            date: "28 September, Sunday",
            location: "Almas Receptions, Melbourne",
            caption: "Melbourne Event",
            images: [
              "events/al atqan academy/melbourne/0.png",
              "events/al atqan academy/melbourne/1.jpg",
              "events/al atqan academy/melbourne/2.jpg",
              "events/al atqan academy/melbourne/3.jpg",
            ],
          },
        ],
        intro:
          "Join us for this exclusive multi-city tour series 'Before the Trumpet: A World on the Edge'. This profound event explores critical themes facing our world today through an Islamic lens. Featuring renowned scholars and engaging discussions, this series promises to be an enlightening experience for all attendees across Australia.",
      };

      // Generic modal builder with slider support
      function buildEventModal(event, modalId) {
        const gallery = document.getElementById(
          `${event.id || "event"}-gallery`
        );
        gallery.innerHTML = "";

        // Intro text
        document.querySelector(
          `#${modalId} .modal-intro-text, #${modalId} #modal-intro-text`
        ).innerText = event.intro;

        // Loop through each sub-event (for Trumpet series) or just once for others
        const eventsToRender = event.isSeries ? event.events : [event];

        eventsToRender.forEach((ev, index) => {
          const wrapper = document.createElement("div");
          wrapper.className = "event-slider-wrapper";

          const slider = document.createElement("div");
          slider.className = "event-slider";
          slider.setAttribute("data-event-index", index);

          ev.images.forEach((imgSrc, i) => {
            const slide = document.createElement("div");
            slide.className = "slide";
            if (i === 0) slide.classList.add("active"); // first image visible
            const img = document.createElement("img");
            img.src = imgSrc;
            img.alt = `${ev.caption || event.title} photo ${i + 1}`;
            slide.appendChild(img);
            slider.appendChild(slide);
          });

          // Only Next button (looping forward)
          const nextBtn = document.createElement("button");
          nextBtn.className = "slider-btn next-btn";
          nextBtn.innerHTML = "&#10095;";

          // Caption
          const caption = document.createElement("div");
          caption.className = "event-caption";
          caption.innerHTML = event.isSeries
            ? `${ev.caption} <br> ${ev.date} | ${ev.location}`
            : `${event.date} | ${event.location}`;

          wrapper.appendChild(slider);
          wrapper.appendChild(nextBtn);
          wrapper.appendChild(caption);
          gallery.appendChild(wrapper);

          // Slider logic
          let currentSlide = 0;
          nextBtn.onclick = () => showSlide(slider, 1);

          function showSlide(slider, direction) {
            const slides = slider.querySelectorAll(".slide");
            slides[currentSlide].classList.remove("active");
            currentSlide =
              (currentSlide + direction + slides.length) % slides.length;
            slides[currentSlide].classList.add("active");
          }
        });
      }

      // Initialize page
      document.addEventListener("DOMContentLoaded", function () {
        const allUpcomingEvents = [trumpetSeries, ...otherUpcomingEvents];

        renderEvents(allUpcomingEvents, "upcoming-events-container", false, 3);
        renderEvents(pastEvents, "past-events-container", true, 3);

        // Modal functionality
        document.addEventListener("click", function (e) {
          if (e.target.matches(".open-modal-btn")) {
            const modalId = e.target.getAttribute("data-modal");
            const modal = document.getElementById(modalId);

            const allEvents = [trumpetSeries, ...otherUpcomingEvents];
            const eventData = allEvents.find((ev) =>
              ev.isSeries
                ? modalId.includes("trumpet")
                : `${ev.id}-modal` === modalId
            );

            if (eventData) {
              buildEventModal(eventData, modalId);
            }

            modal.style.display = "block";
            document.body.style.overflow = "hidden";
          }
        });

        // Close modal buttons
        document.querySelectorAll(".close-modal").forEach((btn) => {
          btn.addEventListener("click", function () {
            this.closest(".modal").style.display = "none";
            document.body.style.overflow = "auto";
          });
        });

        // Close modal on outside click
        window.addEventListener("click", function (e) {
          if (e.target.classList.contains("modal")) {
            e.target.style.display = "none";
            document.body.style.overflow = "auto";
          }
        });

        // WhatsApp CTA
        const whatsappButton = document.querySelector(".whatsapp-cta button");
        if (whatsappButton) {
          whatsappButton.addEventListener("click", function () {
            alert(
              "You would be redirected to join our WhatsApp community group."
            );
          });
        }
      });
    </script>

    <script src="navbar.js"></script>
        <script src="https://static.elfsight.com/platform/platform.js" async></script>

    <script src="/cacheBuster.js"></script>
  </body>
</html>
